# 📚 ドキュメントインデックス

不動産ポータルプロジェクトのドキュメント一覧です。

---

## 🌟 最初に読むドキュメント

| # | ドキュメント | 内容 | 読む順番 |
|---|------------|------|---------|
| 1 | [START_HERE.md](START_HERE.md) | プロジェクト概要・ドキュメントガイド | ⭐ 必読 |
| 2 | [要件定義.md](要件定義.md) | サービスの価値・差別化ポイント | ⭐ 必読 |
| 3 | [技術構成.md](技術構成.md) | 技術スタック・アーキテクチャ | ⭐ 必読 |
| 4 | [TODO.md](TODO.md) | タスク一覧・開発ロードマップ | ⭐ 必読 |

---

## 📋 カテゴリ別ドキュメント

### 企画・要件

| ドキュメント | 内容 | いつ読む？ |
|------------|------|-----------|
| [要件定義.md](要件定義.md) | サービスコンセプト<br>- ワンタップ非表示<br>- ◎/△/× 検索<br>- 相違報告 | プロジェクト理解時 |

### 設計・アーキテクチャ

| ドキュメント | 内容 | いつ読む？ |
|------------|------|-----------|
| [技術構成.md](技術構成.md) | 技術スタック全体<br>- Next.js / Go / MySQL<br>- フェーズ別構成 | 技術選定・設計時 |
| [ER図.md](ER図.md) | データベース設計<br>- 全テーブル定義<br>- リレーション | DB設計・マイグレーション時 |

### 仕様書

| ドキュメント | 内容 | いつ読む？ |
|------------|------|-----------|
| [SPECIFICATION.md](SPECIFICATION.md) | 現在のPoC仕様<br>- API エンドポイント<br>- データモデル<br>- スクレイピング仕様 | API実装・利用時 |

### 実装設計

| ドキュメント | 内容 | いつ読む？ |
|------------|------|-----------|
| [Phase3_差分検出_実装設計.md](Phase3_差分検出_実装設計.md) | 差分検出バッチ<br>- Go 擬似コード<br>- 完全性チェック<br>- エラーハンドリング | Phase 3 実装時 |
| [GORM_モデル定義.md](GORM_モデル定義.md) | MySQL + GORM<br>- モデル定義<br>- リポジトリパターン<br>- マイグレーション | Phase 1 技術移行時 |
| [論理削除と物理削除の設計.md](論理削除と物理削除の設計.md) | データライフサイクル<br>- 論理削除→物理削除<br>- 保持期間設計<br>- 安全装置 | Phase 4.5 実装時 |

### タスク管理

| ドキュメント | 内容 | いつ読む？ |
|------------|------|-----------|
| [TODO.md](TODO.md) | 実装タスク一覧<br>- Phase 0〜6<br>- 優先順位<br>- チェックリスト | 毎日・タスク確認時 |

---

## 🎯 Phase別ドキュメントマップ

### Phase 0: PoC検証（現在）

**読むべきドキュメント**:
1. [TODO.md](TODO.md) - Phase 0
2. [SPECIFICATION.md](SPECIFICATION.md) - 現在のAPI仕様

**実施内容**:
- スクレイピング3回連続成功テスト
- 検索機能の動作確認
- 画像表示確認
- リンク動作確認

---

### Phase 1: 技術スタック修正

**読むべきドキュメント**:
1. [技術構成.md](技術構成.md) - 目標構成
2. [GORM_モデル定義.md](GORM_モデル定義.md) - MySQL移行手順
3. [ER図.md](ER図.md) - テーブル定義
4. [TODO.md](TODO.md) - Phase 1

**実施内容**:
- PostgreSQL → MySQL 8.x
- React+Vite → Next.js 14
- 直接SQL → GORM

---

### Phase 2: 機能改善

**読むべきドキュメント**:
1. [TODO.md](TODO.md) - Phase 2
2. [SPECIFICATION.md](SPECIFICATION.md) - 現在の実装

**実施内容**:
- URL正規化
- 画像URL生存確認
- 正規表現改善

---

### Phase 3: 差分検出・毎日更新

**読むべきドキュメント**:
1. [Phase3_差分検出_実装設計.md](Phase3_差分検出_実装設計.md) - ⭐ メイン
2. [ER図.md](ER図.md) - テーブル定義
3. [GORM_モデル定義.md](GORM_モデル定義.md) - モデル実装
4. [TODO.md](TODO.md) - Phase 3

**実施内容**:
- 一覧取得機能
- 差分判定ロジック
- 論理削除実装
- スケジューラー実装

---

### Phase 4: 負荷最小化・安全運用

**読むべきドキュメント**:
1. [TODO.md](TODO.md) - Phase 4
2. [Phase3_差分検出_実装設計.md](Phase3_差分検出_実装設計.md) - エラーハンドリング

**実施内容**:
- 設定外部化
- レート制限実装

---

### Phase 4.5: 物理削除バッチ

**読むべきドキュメント**:
1. [論理削除と物理削除の設計.md](論理削除と物理削除の設計.md) - ⭐ メイン
2. [ER図.md](ER図.md) - delete_logs テーブル
3. [TODO.md](TODO.md) - Phase 4.5

**実施内容**:
- delete_logsテーブル作成
- 物理削除バッチ実装
- dry-runモード
- スケジューラー設定

---

### Phase 5: アーキテクチャ改善

**読むべきドキュメント**:
1. [技術構成.md](技術構成.md) - 将来構成
2. [TODO.md](TODO.md) - Phase 5

**実施内容**:
- Fetcher Interface設計
- データソース抽象化

---

### Phase 6: 管理機能

**読むべきドキュメント**:
1. [TODO.md](TODO.md) - Phase 6

**実施内容**:
- ステータス可視化画面
- 管理API

---

## 🔍 シナリオ別ガイド

### 「プロジェクト全体を理解したい」

```
1. START_HERE.md      (5分)
   ↓
2. 要件定義.md         (10分)
   ↓
3. 技術構成.md         (10分)
   ↓
4. TODO.md            (5分)
```

**合計**: 約30分でプロジェクト全体を把握

---

### 「今すぐ開発を始めたい」

```
1. TODO.md (Phase 0〜1を確認)
   ↓
2. SPECIFICATION.md (現在のAPI仕様)
   ↓
3. ER図.md (DB構造)
   ↓
4. 実装開始
```

---

### 「Phase 3（差分検出）を実装したい」

```
1. TODO.md Phase 3 (タスク確認)
   ↓
2. Phase3_差分検出_実装設計.md (Go擬似コード)
   ↓
3. ER図.md (テーブル定義)
   ↓
4. GORM_モデル定義.md (モデル実装)
   ↓
5. 実装開始
```

---

### 「技術移行（MySQL / Next.js）をしたい」

```
1. 技術構成.md (目標構成を理解)
   ↓
2. GORM_モデル定義.md (MySQL移行手順)
   ↓
3. ER図.md (テーブル定義)
   ↓
4. TODO.md Phase 1 (タスク確認)
   ↓
5. 移行開始
```

---

## ⚠️ 重要な注意事項

### データ保護の鉄則（必ず守る）

```
❌ 絶対にやってはいけないこと

1. 既存データの削除
2. Dockerコンテナの破壊（docker-compose down -v）
3. マイグレーション時のリフレッシュ
4. 他プロジェクトへの影響
5. 物理削除（Phase 4.5まで禁止）
```

```
✅ 正しいやり方

1. 論理削除を使用（status = 'removed'）
2. ALTER TABLE ADD COLUMN（既存データ保持）
3. バックアップを取ってから作業
4. dry-runモードで確認
5. エラー時は即停止
```

詳細は → [論理削除と物理削除の設計.md](論理削除と物理削除の設計.md)

---

## 📊 ドキュメントの関係図

```
START_HERE.md (入口)
  ├── 要件定義.md (WHY)
  │     └── サービスの価値・差別化
  │
  ├── 技術構成.md (WHAT)
  │     ├── Next.js / Go / MySQL
  │     └── フェーズ別構成
  │
  ├── TODO.md (WHEN)
  │     ├── Phase 0〜6
  │     └── 優先順位
  │
  └── 実装設計 (HOW)
        ├── SPECIFICATION.md (現在のAPI)
        ├── ER図.md (DB設計)
        ├── Phase3_差分検出_実装設計.md (バッチ)
        ├── GORM_モデル定義.md (モデル)
        └── 論理削除と物理削除の設計.md (運用)
```

---

## 🔗 外部リソース

- [Go公式ドキュメント](https://go.dev/doc/)
- [Next.js公式ドキュメント](https://nextjs.org/docs)
- [GORM公式ドキュメント](https://gorm.io/docs/)
- [Meilisearch公式ドキュメント](https://www.meilisearch.com/docs)
- [MySQL 8.x リファレンス](https://dev.mysql.com/doc/refman/8.0/ja/)

---

## 📝 ドキュメントメンテナンス

### ドキュメント更新ルール

1. **Phase進行時**: TODO.mdを更新
2. **仕様変更時**: SPECIFICATION.mdを更新
3. **DB変更時**: ER図.mdを更新
4. **新機能追加時**: 該当する実装設計書を更新

### ドキュメント品質基準

- ✅ コードスニペットが動く
- ✅ リンク切れがない
- ✅ 最終更新日が記載されている
- ✅ 実装に直結する情報がある

---

**最終更新**: 2025-12-16

**次のステップ**: [START_HERE.md](START_HERE.md) を読んでプロジェクトを理解する
